# Feature Spec: 04.2 - Participants Overview

## Overview
Central session dashboard showing all participants with their status and providing access to revealed card arrangements. This screen serves as the main hub for all collaboration features.

## User Story
As a participant, I can see all other participants in my session, their current status, and access their revealed card selections from a dedicated overview screen accessible via the participant count button in the header.

## Sub-Specifications

This feature is broken down into focused sub-specifications for better development, testing, and maintenance:

### 04.2.1 - Header Integration
**Scope**: Participant count button in main app header with real-time updates and navigation
- Real-time participant count display
- Click navigation to overview screen
- Visual indicators for join/leave events
- Integration across all app pages

### 04.2.2 - Participant Cards
**Scope**: Visual design and layout of participant representation cards
- Card stack visual design (reusing existing deck styling)
- Grid layout system and responsiveness  
- Participant identity display (emoji + name)
- Status display logic and states

### 04.2.3 - Real-time Sync
**Scope**: Ably integration for live participant data synchronization
- Participant join/leave event handling
- Status update broadcasting and receiving
- Channel management and message types
- Error handling and recovery

### 04.2.4 - Navigation & Actions
**Scope**: Interactive elements and navigation flows
- Entry and exit points
- View action buttons for revealed participants
- Mobile considerations and accessibility
- Integration with other collaboration features

## Implementation Order
1. **04.2.1** Header Integration (foundation)
2. **04.2.2** Participant Cards (visual design)  
3. **04.2.3** Real-time Sync (live updates)
4. **04.2.4** Navigation & Actions (interactions)

## Overall Dependencies
- 04.1 Ably Setup âœ“
- 01.2 Session Management âœ“
- Future: 04.3 Reveal Mechanism (for view buttons)
- Future: 04.4 Viewer Mode (navigation target)

## Integration Points
- **Header Button**: Integrates with main app header across all pages
- **Reveal Status**: Will consume reveal events from 04.3
- **View Navigation**: Will launch 04.4 Viewer Mode
- **Presence Data**: Will integrate with 04.5 Presence System for activity

## Shared Technical Requirements

### Data Types
```typescript
interface ParticipantOverviewData {
  id: string;
  name: string;
  emoji: string;
  color: string;
  currentStep: 1 | 2 | 3;
  status: 'sorting' | 'revealed-8' | 'revealed-3' | 'completed';
  revealed: {
    top8: boolean;
    top3: boolean;
    timestamps: {
      top8?: number;
      top3?: number;
    }
  };
  lastActive: number;
  joinedAt: number;
}
```

### Status Display Logic
- **Step 1 Users**: "Still sorting..." with subtle animation
- **Step 2 Users**: 
  - Not revealed: "Still sorting..."
  - Revealed: "See [Name]'s Top 8" button
- **Step 3 Users**:
  - Not revealed: "Still sorting..." 
  - Revealed Top 8 only: "See [Name]'s Top 8" button
  - Revealed Top 3: "See [Name]'s Top 3" button (primary)
- **Completed Users**: "See [Name]'s Top 3" button

### Shared Style System
All sub-specs should reference the shared card styling system:
- Use existing `w-64 h-40` card dimensions
- Reference `Deck.tsx` stacking algorithm  
- Inherit `bg-gradient-to-br from-blue-600 to-purple-700` styling
- Apply consistent hover and animation behaviors

## Overall Acceptance Criteria
- [ ] Participant count button shows real-time accurate count
- [ ] Overview screen displays all session participants except self
- [ ] Participant cards show correct status (sorting vs revealed)
- [ ] View buttons appear only for revealed participants
- [ ] Real-time updates work smoothly without page refresh
- [ ] Navigation to/from overview screen works seamlessly
- [ ] Mobile experience is fully functional with touch
- [ ] Performance remains smooth with maximum participants (50)
- [ ] Error states handled gracefully with recovery
- [ ] Accessibility features work with screen readers

## Test Strategy
Each sub-spec will have focused test cases, with integration tests ensuring:
1. **Header â†’ Cards**: Count accuracy and navigation
2. **Cards â†’ Sync**: Real-time status updates
3. **Sync â†’ Navigation**: Action button state changes
4. **End-to-End**: Complete user flow testing

## Status: ðŸ”´ Not Started

**Implementation Priority**: High - Foundation for all collaboration features  
**Estimated Complexity**: High - Complex feature broken into manageable parts  
**Dependencies**: Sub-specs must be implemented in order (04.2.1 â†’ 04.2.4)

---

*See individual sub-specification files for detailed technical requirements and implementation details.*