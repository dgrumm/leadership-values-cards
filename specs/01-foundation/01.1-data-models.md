# Feature Spec: 01.1 - Data Models

## Overview
Core data structures for managing sessions, participants, and card state throughout the leadership values sorting exercise.

## User Story
As a developer, I need well-defined data models to ensure consistent state management across the application.

## Technical Requirements

### Card Model
- [ ] Unique identifier for each card
- [ ] Value name and description from CSV
- [ ] Current position coordinates (x, y)
- [ ] Current pile assignment (deck, staging, more, less, top8, top3, discard)
- [ ] Ownership tracking (which participant)

### Session Model
- [ ] 6-character alphanumeric session code generation
- [ ] Creation timestamp and last activity tracking
- [ ] Participant list with maximum 50 participants
- [ ] Deck type configuration (dev/professional/extended)
- [ ] Session lifecycle state management

### Participant Model
- [ ] Name validation (1-50 characters, handle duplicates)
- [ ] Unique emoji and color assignment from predefined sets
- [ ] Current step tracking (1, 2, 3)
- [ ] Status tracking (sorting, revealed-8, revealed-3, completed)
- [ ] Card arrangement state for each step
- [ ] Join timestamp and activity tracking

### Game State Model
- [ ] Current step progression per participant
- [ ] Pile contents and card counts
- [ ] Reveal status for Top 8 and Top 3
- [ ] Viewer presence tracking
- [ ] Canvas zoom and pan state

## Data Structures

```typescript
interface Card {
  id: string;
  value_name: string;
  description: string;
  position: { x: number; y: number };
  pile: 'deck' | 'staging' | 'more' | 'less' | 'top8' | 'top3' | 'discard';
  owner?: string;
}

interface Session {
  sessionCode: string;
  createdAt: string;
  lastActivity: string;
  deckType: 'dev' | 'professional' | 'extended';
  maxParticipants: number;
  participants: Participant[];
}

interface Participant {
  name: string;
  emoji: string;
  color: string;
  joinedAt: string;
  currentStep: 1 | 2 | 3;
  status: 'sorting' | 'revealed-8' | 'revealed-3' | 'completed';
  cardStates: {
    step1: { more: Card[]; less: Card[] };
    step2: { top8: Card[]; less: Card[] };
    step3: { top3: Card[]; less: Card[] };
  };
  revealed: {
    top8: boolean;
    top3: boolean;
  };
  isViewing: string | null;
}
```

## Validation Rules
- [ ] Session codes must be unique and 6 characters
- [ ] Participant names must be 1-50 characters
- [ ] Maximum 1 card in staging area at a time
- [ ] Pile capacity limits enforced (8 for top8, 3 for top3)
- [ ] Card position bounds checking within canvas

## Acceptance Criteria
- [ ] All models support serialization/deserialization
- [ ] Type safety enforced throughout application
- [ ] State transitions validated before applying
- [ ] Memory efficient for 50 concurrent participants
- [ ] Supports real-time synchronization

## Test Cases
1. Create session with valid/invalid codes
2. Add participants up to maximum limit
3. Validate card pile transitions and limits
4. Test duplicate name handling
5. Verify emoji/color assignment uniqueness

## Dependencies
None - Foundation level

## Status: ðŸ”´ Not Started